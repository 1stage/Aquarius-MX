# Developer Notes
Generated by makedev.py

---
## Register Usage
### IX
- Used in module windows.asm to point to the window structure.
  - Should not conflict with usage in MX BASIC, as the module is never used from within BASIC itself
- Used in MX BASIC by the UDF Hook call and dispatch routines and the statement and function dispatch routines.
- Can be used as a temporary variable in any routine
  - Assume that it will be changes by CALLs to most BASIC system routines
### IY
- Used in the debuggers.
  - Should not conflist with usage in MX BASIC, as the debuggers save all the registers when handling a Break
- Used in dos.asm to point to the system variable DosFlags
  - Can be used as variable that persists through any BASIC statement handling routine.
- Do *not* use as a temporary variable in any subroutines that may be called by a statement handler.
---
## Real Time Clock
### System Variables
- The 24 bytes of RAM between Screen RAM and Color RAM and the 24 bytes between the end of Color RAM and System Variables are used as temporary variables by the RTC and DateTime Routines. These areas are overwritten when the screen is cleared via PRINT CHR$(11)
### Implementing Real Time Clock in Emulators
- The will be a read from memory location $37F0 whenever the RTC is accessed
- If $37F0 contains $7F, the RTC is being written to and the following bytea contain the date to be written.
- If $37F0 contains any other value, the RTC was just read and $37F0 should be filled with $FF and the following bytes with the current date/time.
- See the RTC driver file for the date/time structure.
---
## PSGs (Programmable Sound Generators)
### Hardware
- The Aquarius MX, Micro Expander, and Mini Expander have an on-board AY-3-8910 sound chip (referred to in the code as PSG1) on IO addresses $F7 *register* and $F6 *data*.
- The Aquarius MX has an option for a second AY-3-8913 sound chip (referred to in the code as PSG2) on IO addresses $F9 *register* and $F8 *data*. This device does not have the capability for controller input.
### Software
- If writing to a PSG to modify sound output, the *register* must be written to first, followed by the *data*
- If reading from a PSG to process controller input, the *register* must be written to first to select which controllers will be polled, then the *register* is read to receive the input bytes.
### AY PSG Registers
- 0  - Channel A Tone Period, fine
- 1  - Channel A Tone Period, coarse
- 2  - Channel B Tone Period, fine
- 3  - Channel B Tone Period, coarse
- 4  - Channel C Tone Period, fine
- 5  - Channel C Tone Period, coarse
- 6  - Channel Noise Period
- 7  - Enable Channels/Noise/IO
- 10 - Channel A Amplitude
- 11 - Channel B Amplitude
- 12 - Channel C Amplitude
- 13 - Envelop Period, fine
- 14 - Envelop Period, coarse
- 15 - Envelope Shape/Cycle
- 16 - IO Port A Data Store
- 17 - IO Port B Data Store

